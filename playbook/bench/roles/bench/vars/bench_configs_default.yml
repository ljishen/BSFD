---
# This file is used for combining all benchmark configurations.
# Use bench_configs.yml if you want to test some individual cases.

benchmarks:
  - name: sysbench
    desc: "CPU & Memory & File I/O performance test"
    docker_image: ljishen/sysbench
    configs:
      # CPU performance test
      - desc: "CPU performance test: max-prime=20k"
        args:
          run: "##OUTPUT_FILE## --test=cpu --cpu-max-prime=20000 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=cpu --cpu-max-prime=20000 run"
        output_file_suffix: "cpu_20k.prof"
      - desc: "CPU performance test: max-prime=500k"
        args:
          run: "##OUTPUT_FILE## --test=cpu --cpu-max-prime=500000 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=cpu --cpu-max-prime=500000 run"
        output_file_suffix: "cpu_500k.prof"
      - desc: "CPU performance test: max-prime=1000k"
        args:
          run: "##OUTPUT_FILE## --test=cpu --cpu-max-prime=1000000 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=cpu --cpu-max-prime=1000000 run"
        output_file_suffix: "cpu_1000k.prof"
 

      # Memory functions speed test
      # 1 thread
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=read, memory-access-mode=seq, max-time=300, max-requests=0 num-threads=1"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=1 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=1 run"
        output_file_suffix: "memory_1k_read_seq_time_300sec_threads_1.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=write, memory-access-mode=seq, max-time=300, max-requests=0, num-threads=1"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=1 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=1 run"
        output_file_suffix: "memory_1k_write_seq_time_300sec_threads_1.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=read, memory-access-mode=rnd, max-time=300, max-requests=0, num-threads=1"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=1 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=1 run"
        output_file_suffix: "memory_1k_read_rnd_time_300sec_threads_1.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=write, memory-access-mode=rnd, max-time=300, max-requests=0, num-threads=1"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K, --memory-oper=write --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=1 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=1 run"
        output_file_suffix: "memory_1k_write_rnd_time_300sec_threads_1.prof"

        # 2 threads
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=read, memory-access-mode=seq, max-time=300, max-requests=0 num-threads=2"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=2 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=2 run"
        output_file_suffix: "memory_1k_read_seq_time_300sec_threads_2.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=write, memory-access-mode=seq, max-time=300, max-requests=0, num-threads=2"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=2 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=2 run"
        output_file_suffix: "memory_1k_write_seq_time_300sec_threads_2.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=read, memory-access-mode=rnd, max-time=300, max-requests=0, num-threads=2"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=2 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=2 run"
        output_file_suffix: "memory_1k_read_rnd_time_300sec_threads_2.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=write, memory-access-mode=rnd, max-time=300, max-requests=0, num-threads=2"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K, --memory-oper=write --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=2 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=2 run"
        output_file_suffix: "memory_1k_write_rnd_time_300sec_threads_2.prof" 

        # 3 threads
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=read, memory-access-mode=seq, max-time=300, max-requests=0 num-threads=3"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=3 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=3 run"
        output_file_suffix: "memory_1k_read_seq_time_300sec_threads_3.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=write, memory-access-mode=seq, max-time=300, max-requests=0, num-threads=3"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=3 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=3 run"
        output_file_suffix: "memory_1k_write_seq_time_300sec_threads_3.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=read, memory-access-mode=rnd, max-time=300, max-requests=0, num-threads=3"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=3 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=3 run"
        output_file_suffix: "memory_1k_read_rnd_time_300sec_threads_3.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=write, memory-access-mode=rnd, max-time=300, max-requests=0, num-threads=3"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K, --memory-oper=write --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=3 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=3 run"
        output_file_suffix: "memory_1k_write_rnd_time_300sec_threads_3.prof" 

        # 4 threads
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=read, memory-access-mode=seq, max-time=300, max-requests=0 num-threads=4"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=4 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=4 run"
        output_file_suffix: "memory_1k_read_seq_time_300sec_threads_4.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=write, memory-access-mode=seq, max-time=300, max-requests=0, num-threads=4"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=4 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=4 run"
        output_file_suffix: "memory_1k_write_seq_time_300sec_threads_4.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=read, memory-access-mode=rnd, max-time=300, max-requests=0, num-threads=4"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=4 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=4 run"
        output_file_suffix: "memory_1k_read_rnd_time_300sec_threads_4.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=write, memory-access-mode=rnd, max-time=300, max-requests=0, num-threads=4"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K, --memory-oper=write --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=4 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=4 run"
        output_file_suffix: "memory_1k_write_rnd_time_300sec_threads_4.prof"

        # 5 threads
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=read, memory-access-mode=seq, max-time=300, max-requests=0 num-threads=5"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=5 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=5 run"
        output_file_suffix: "memory_1k_read_seq_time_300sec_threads_5.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=write, memory-access-mode=seq, max-time=300, max-requests=0, num-threads=5"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=5 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=seq --max-time=300 --max-requests=0 --num-threads=5 run"
        output_file_suffix: "memory_1k_write_seq_time_300sec_threads_5.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=read, memory-access-mode=rnd, max-time=300, max-requests=0, num-threads=5"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=5 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=read --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=5 run"
        output_file_suffix: "memory_1k_read_rnd_time_300sec_threads_5.prof"
      - desc: "Memory functions speed test: memory-block-size=1K, memory-oper=write, memory-access-mode=rnd, max-time=300, max-requests=0, num-threads=5"
        args:
          run: "##OUTPUT_FILE## --test=memory --memory-block-size=1K, --memory-oper=write --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=5 run"
          docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=memory --memory-block-size=1K --memory-oper=write --memory-access-mode=rnd --max-time=300 --max-requests=0 --num-threads=5 run"
        output_file_suffix: "memory_1k_write_rnd_time_300sec_threads_5.prof"


      # File I/O test
      - desc: "File I/O test: file preparation - file-num=128, file-total-size=100G"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G prepare"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G prepare"
        output_file_suffix: "fileio_prepare_num_128_size_100g.log"

      # sequential write test
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqwr, num-threads=1"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=1 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=1 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqwr_threads_1.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqwr, num-threads=2"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=2 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=2 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqwr_threads_2.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqwr, num-threads=4"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=4 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=4 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqwr_threads_4.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqwr, num-threads=8"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=8 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=8 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqwr_threads_8.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqwr, num-threads=16"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=16 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=16 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqwr_threads_16.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqwr, num-threads=32"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=32 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=32 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqwr_threads_32.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqwr, num-threads=64"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=64 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqwr --num-threads=64 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqwr_threads_64.prof"

      # sequential read test
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqrd, num-threads=1"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=1 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=1 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqrd_threads_1.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqrd, num-threads=2"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=2 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=2 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqrd_threads_2.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqrd, num-threads=4"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=4 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=4 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqrd_threads_4.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqrd, num-threads=8"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=8 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=8 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqrd_threads_8.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqrd, num-threads=16"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=16 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=16 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqrd_threads_16.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqrd, num-threads=32"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=32 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=32 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqrd_threads_32.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=seqrd, num-threads=64"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=64 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=seqrd --num-threads=64 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_seqrd_threads_64.prof"

      # random write test
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndwr, num-threads=1"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=1 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=1 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndwr_threads_1.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndwr, num-threads=2"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=2 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=2 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndwr_threads_2.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndwr, num-threads=4"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=4 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=4 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndwr_threads_4.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndwr, num-threads=8"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=8 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=8 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndwr_threads_8.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndwr, num-threads=16"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=16 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=16 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndwr_threads_16.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndwr, num-threads=32"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=32 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=32 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndwr_threads_32.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndwr, num-threads=64"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=64 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndwr --num-threads=64 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndwr_threads_64.prof"

       # random read test
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndrd, num-threads=1"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=1 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=1 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndrd_threads_1.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndrd, num-threads=2"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=2 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=2 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndrd_threads_2.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndrd, num-threads=4"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=4 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=4 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndrd_threads_4.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndrd, num-threads=8"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=8 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=8 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndrd_threads_8.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndrd, num-threads=16"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=16 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=16 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndrd_threads_16.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndrd, num-threads=32"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=32 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=32 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndrd_threads_32.prof"
      - desc: "File I/O test: run - file-num=128, file-total-size=100G, file-block-size=1024, max-time=60, max-requests=0, file-test-mode=rndrd, num-threads=64"
        args:
          run: "##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=64 run"
          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio --file-num=128 --file-total-size=100G --file-block-size=1024 --max-time=60 --max-requests=0 --file-test-mode=rndrd --num-threads=64 run"
        output_file_suffix: "fileio_run_num_128_size_100g_block_1024_time_60sec_rndrd_threads_64.prof"
#      - desc: "File I/O test: file cleanup"
#        args:
#          run: "##OUTPUT_FILE## --test=fileio cleanup"
#          docker_run: "--blkio-weight 1000 -v `pwd`:/root/results -v `pwd`/workdir:/root/workdir ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --test=fileio cleanup"
#        output_file_suffix: "fileio_cleanup.log"

  - name: stress-ng
    desc: "CPU & Memory & I/O & Network performance test"
    docker_image: ljishen/stress-ng
    ignore_errors: True
    configs:
      - desc: "CPU performance test: class=cpu"
        args:
          run: "--yaml ##OUTPUT_FILE## --timeout 60s --class cpu --sequential 1"
          docker_run: "--cap-add=SYS_RESOURCE -v `pwd`:/root/results ##CONTAINER_ID## --yaml /root/results/##OUTPUT_FILE## --timeout 60s --class cpu --sequential 1"
        output_file_suffix: "cpu.prof"
      - desc: "CPU Cache performance test: class=cpu-cache"
        args:
          run: "--yaml ##OUTPUT_FILE## --timeout 60s --class cpu-cache --sequential 1"
          docker_run: "--cap-add=SYS_RESOURCE -v `pwd`:/root/results ##CONTAINER_ID## --yaml /root/results/##OUTPUT_FILE## --timeout 60s --class cpu-cache --sequential 1"
        output_file_suffix: "cpu-cache.prof"
      - desc: "Memory performance test: class=memory"
        args:
          run: "--yaml ##OUTPUT_FILE## --timeout 60s --class memory --sequential 1"
          docker_run: "--cap-add=SYS_RESOURCE -v `pwd`:/root/results ##CONTAINER_ID## --yaml /root/results/##OUTPUT_FILE## --timeout 60s --class memory --sequential 1"
        output_file_suffix: "memory.prof"
      - desc: "I/O performance test: class=io"
        args:
          run: "--yaml ##OUTPUT_FILE## --timeout 60s --class io --sequential 1"
          docker_run: "--cap-add=SYS_RESOURCE -v `pwd`:/root/results ##CONTAINER_ID## --yaml /root/results/##OUTPUT_FILE## --timeout 60s --class io --sequential 1"
        output_file_suffix: "io.prof"
      - desc: "Network performance test: class=network"
        args:
          run: "--yaml ##OUTPUT_FILE## --timeout 60s --class network --sequential 1"
          docker_run: "--cap-add=SYS_RESOURCE -v `pwd`:/root/results ##CONTAINER_ID## --yaml /root/results/##OUTPUT_FILE## --timeout 60s --class network --sequential 1"
        output_file_suffix: "network.prof"

  - name: pmbw
    desc: "Memory Bandwidth test"
    docker_image: ljishen/pmbw
    configs:
      - desc: "Memory Bandwidth test: (maximum amount of memory allocated at startup)=1G, (Run benchmarks with at most this thread count)=1"
        args:
          run: "pmbw ##OUTPUT_FILE## -M 1073741824 -P 1"
          # use the Docker host network stack because we need to set the host name correctly in the result file, or else the container id is used.
          docker_run: "--network host -v `pwd`:/root/results ##CONTAINER_ID## pmbw /root/results/##OUTPUT_FILE## -M 1073741824 -P 1"
        output_file_suffix: "memory_m1_p1.prof"

  - name: iperf3
    desc: "Network bandwidth performance test"
    docker_image: ljishen/iperf3
    configs:
      - desc: "Network bandwidth test: UDP, 160 KByte socket buffer size"
        args:
            run: "##OUTPUT_FILE## --client {{ iperf3_server }} --udp --interval 1 --time 20 --window 160k"
            docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --client {{ iperf3_server }} --udp --interval 1 --time 20 --window 160k"
        output_file_suffix: "udp_w160k.prof"
      - desc: "Network bandwidth test: TCP, 2 KByte window size"
        args:
            run: "##OUTPUT_FILE## --client {{ iperf3_server }} --time 20 --window 2k"
            docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --client {{ iperf3_server }} --time 20 --window 2k"
        output_file_suffix: "tcp_w2k.prof"
      - desc: "Network bandwidth test: TCP, 85 KByte window size"
        args:
            run: "##OUTPUT_FILE## --client {{ iperf3_server }} --time 20 --window 85k"
            docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --client {{ iperf3_server }} --time 20 --window 85k"
        output_file_suffix: "tcp_w85k.prof"
      - desc: "Network bandwidth test: TCP, 200 KByte window size"
        args:
            run: "##OUTPUT_FILE## --client {{ iperf3_server }} --time 20 --window 200k"
            docker_run: "-v `pwd`:/root/results ##CONTAINER_ID## /root/results/##OUTPUT_FILE## --client {{ iperf3_server }} --time 20 --window 200k"
        output_file_suffix: "tcp_w200k.prof"
